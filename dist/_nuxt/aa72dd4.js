(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{1105:function(e,t,r){"use strict";r.r(t);var o=r(1),n=r(10),c=(r(15),r(14),r(28),r(22),r(29),r(8)),l=r(4),d=(r(34),r(75),r(13),r(7),r(301),r(69),r(223),r(38),r(19),r(944)),h=r(93),f=r(121),v=r(99),m=r(181),y=r(82),O=r(832),x=r(900);function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){Object(c.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var C=Object(o.defineComponent)({components:{Chart:d.Chart},props:{amountType:{type:String,default:null},categoryId:{type:String,default:null},isShowExpense:{type:Boolean,default:!0},isShowIncome:{type:Boolean,default:!0},isShowSum:{type:Boolean,default:!1}},setup:function(){var e=Object(n.g)().$store,t=Object(O.a)().isShowDataLabels,r=Object(y.a)(),c=r.filterPeriodNameAllReplacedToYear,d=r.scrollTop,h=Object(o.computed)((function(){return e.state.chart.periods})),f=Object(o.computed)((function(){return h.value[c.value].grouped?"column":"spline"})),v=Object(o.ref)({}),m=function(){var t=Object(l.a)(regeneratorRuntime.mark((function t(r){var o,n,c,l,h,f,m,y,O;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(m=v.value){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,m.pointer.normalize(r);case 5:y=t.sent,O=(null===(o=m.series[0])||void 0===o||null===(n=o.searchPoint(y,!0))||void 0===n?void 0:n.date)||(null===(c=m.series[1])||void 0===c||null===(l=c.searchPoint(y,!0))||void 0===l?void 0:l.date)||(null===(h=m.series[2])||void 0===h||null===(f=h.searchPoint(y,!0))||void 0===f?void 0:f.date),setTimeout((function(){var t,r,o,n,c,l;(O=(null===(t=m.series[0])||void 0===t||null===(r=t.searchPoint(y,!0))||void 0===r?void 0:r.date)||(null===(o=m.series[1])||void 0===o||null===(n=o.searchPoint(y,!0))||void 0===n?void 0:n.date)||(null===(c=m.series[2])||void 0===c||null===(l=c.searchPoint(y,!0))||void 0===l?void 0:l.date))&&("all"===e.state.filter.period&&e.dispatch("filter/setPeriod","year"),e.dispatch("filter/setDate",Number.parseInt(O)),d())}),100);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(o.watch)((function(){return e.state.filter.date}),Object(l.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(o.nextTick)();case 2:if(r=v.value,v.value){t.next=5;break}return t.abrupt("return");case 5:-1!==(n=r.series[0].options.data.findIndex((function(t){return+t.date==+e.state.filter.date})))&&r.xAxis[0].update({plotBands:[{color:"var(--c-item-bg-active)",from:n+.5,to:n-.5}]});case 7:case"end":return t.stop()}}),t)}))),{immediate:!0}),{onClickChart:m,chartCallback:function(e){v.value=e},isShowDataLabels:t,chartType:f,filterPeriodNameAllReplacedToYear:c,scrollTop:d}},computed:{chartData:function(){var e=this.filterPeriodNameAllReplacedToYear,t=this.$store.state.chart.periods,r=this.$store.state.trns.items,o=this.$store.state.categories.items,n=this.$store.state.wallets.items,c=this.$store.state.currencies.base,l=this.$store.state.currencies.rates,d=this.$store.state.filter,y=Object(v.c)(o),O=this.$day(r[this.$store.getters["trns/firstCreatedTrnId"]].date).endOf(e),w=this.$day().endOf(e).diff(O,e)+1,C=t[e].showedPeriods;w=C>=w?w:C;for(var S=[],k=[],P=[],I=[],T=0;T<w;T++){var $=this.$day().startOf(e).subtract(T,e).valueOf(),D=d.catsIds.length>0?Object(v.b)(d.catsIds,o):null,A=d.walletsIds.length>0?d.walletsIds:null,L=Object(h.a)({trnsItems:r,walletsIds:A,categoriesIds:D,periodName:e,date:$}),R=Object(f.b)({baseCurrencyCode:c,rates:l,trnsIds:L,trnsItems:r,walletsItems:n,transferCategoriesIds:y}),z=R.incomeTransactions,M=R.expenseTransactions,W=R.sumTransactions,Y="MM";"day"===e&&(Y="D.MM"),"week"===e&&(Y="D MMM"),"month"===e&&(Y="MMM"),"year"===e&&(Y="YYYY");var E=this.$day().startOf(e).subtract(T,e).format(Y);k.unshift({date:$,y:z}),P.unshift({date:$,y:M}),I.unshift({date:$,y:W}),S.unshift(E)}for(var N=0,B=0,F=0,_=k;F<_.length;F++){var H=_[F];0!==H.y&&(N+=1,B+=H.y)}for(var V=0,J=0,G=0,K=P;G<K.length;G++){var U=K[G];0!==U.y&&(V+=1,J+=U.y)}for(var Q=0,X=0,Z=I;X<Z.length;X++){var ee=Z[X];0!==ee.y&&(1,Q+=ee.y)}var data={series:[{zIndex:3,visible:B>0&&this.isShowIncome,type:this.chartType,name:this.$t("money.income"),color:"var(--c-income-1)",data:k,marker:{lineColor:"var(--c-income-1)"}},{zIndex:2,visible:J>0&&this.isShowExpense,type:this.chartType,name:this.$t("money.expense"),color:"var(--c-expense-1)",data:P,marker:{lineColor:"var(--c-expense-1)"}},{zIndex:3,visible:B>0&&J>0&&this.isShowSum,type:this.chartType,name:this.$t("money.sum"),color:"var(--c-font-2)",data:I,marker:{lineColor:"var(--c-font-2)"}}],categories:S,averageIncome:B/N,averageExpense:J/V,averageSum:J/V},te={enabled:!1};this.$store.state.ui.pc&&(te=j(j({},x.a.tooltip),{},{formatter:function(){return this.points.reduce((function(s,e){return"".concat(s,"<br/>").concat(e.series.name,": ").concat(Object(m.a)(e.y,c)," ").concat(Object(m.b)(c))}),this.x)}}));var re=[];return J>0&&this.isShowExpense&&re.push({opacity:.5,color:"var(--c-expense-opacity)",value:data.averageExpense,width:"2",zIndex:1}),B>0&&this.isShowIncome&&re.push({opacity:.5,color:"var(--c-income-opacity)",value:data.averageIncome,width:"2",zIndex:1}),Q>0&&this.isShowSum&&re.push({opacity:.5,color:"var(--c-font-4)",value:data.averageSum,width:"2",zIndex:1}),j(j({},x.a),{},{legend:!1,tooltip:te,series:data.series,xAxis:j(j({},x.a.xAxis),{},{categories:data.categories}),yAxis:j(j({},x.a.yAxis),{},{plotLines:re}),chart:j(j({},x.a.chart),{},{height:"180"}),plotOptions:j(j({},x.a.plotOptions),{},{series:j(j({},x.a.plotOptions.series),{},{dataLabels:j(j({},x.a.plotOptions.series.dataLabels),{},{enabled:this.isShowDataLabels,formatter:function(){return Object(m.a)(this.y,c)}})})})})}}}),S=C,k=r(6),component=Object(k.a)(S,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"relative",on:{click:e.onClickChart}},[t("Chart",{key:e.$route.fullPath,attrs:{options:e.chartData,callback:e.chartCallback}})],1)}),[],!1,null,null,null);t.default=component.exports},832:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var o=r(1),n=r(10),c=r(82),l=Object(o.ref)(!1);function d(){var e=Object(n.g)().$store,t=Object(c.a)().filterPeriodNameAllReplacedToYear;return{isShowDataLabels:l,toggleChartsView:function(){e.commit("chart/toggleChartPeriodView",{periodName:t.value}),e.dispatch("ui/saveUiView")},showDataLabels:function(){l.value=!0},hideDataLabels:function(){l.value=!1}}}},900:function(e,t,r){"use strict";t.a={chart:{backgroundColor:"transparent",with:"100%",height:"40%",spacing:[10,15,0,15],type:"column",panning:!0,panKey:"shift"},title:{text:null},credits:{enabled:!1},legend:{itemHiddenStyle:{fontWeight:"normal",color:"var(--c-font-5)"},itemStyle:{fontWeight:"normal",color:"var(--c-font-4)"},itemHoverStyle:{fontWeight:"normal",color:"var(--c-font-4)"}},plotOptions:{areaspline:{fillOpacity:.3,borderWidth:2},column:{groupPadding:.3,pointPadding:.1,borderWidth:0,maxPointWidth:10,borderRadius:3},spline:{lineWidth:2,states:{hover:{lineWidth:2}}},pie:{dataLabels:{enabled:!0,distance:-30,format:"<b>{point.name}</b><br>{point.y}",filter:{property:"percentage",operator:">",value:4}},startAngle:270},series:{states:{inactive:{opacity:1}},marker:{radius:3,fillColor:"var(--c-bg-4)",lineWidth:2,lineColor:"var(--c-income-1)",symbol:"circle"},dataLabels:{enabled:!0,allowOverlap:!1,shadow:!1,color:"var(--c-chart-lables-text-color)",backgroundColor:"var(--c-item-bg-main)",align:"center",borderRadius:3,padding:3,y:-8,style:{textOutline:"var(--c-chart-lables-text-shaddow)",fontSize:"11px",fontFamily:"var(--font-secondary)",fontWeight:400,textTransform:"uppercase"}}}},xAxis:{categories:[],lineColor:"var(--c-bg-7)",tickColor:"var(--c-bg-7)",tickmarkPlacement:"on",crosshair:!0,labels:{autoRotation:0,padding:15,rotation:!1,style:{lineHeight:"10px",cursor:"pointer",color:"var(--c-font-5)",fontSize:"10px",fontFamily:"var(--font-secondary)",textTransform:"uppercase"}}},yAxis:{opposite:!1,endOnTick:!1,cursor:"pointer",alternateGridColor:"",gridLineColor:"var(--c-bg-5)",title:{text:null},labels:{style:{cursor:"pointer",color:"var(--c-font-5)",fontSize:"12px",fontFamily:"var(--font-secondary)",textTransform:"uppercase"}}},tooltip:{shared:!0,backgroundColor:"var(--c-bg-3)",borderColor:"var(--c-bg-7)",borderRadius:8,padding:8,shadow:!1,style:{color:"var(--c-font-2)",fontSize:"14px",fontFamily:"var(--font-roboto)"}}}}}]);